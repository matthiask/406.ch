<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Weeknotes (2023 week 28) - Matthias Kestenholz</title><link href=/styles.e734bff1fc91.css rel=stylesheet><link title="Blog feed"href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=title href=/>Hi, I'm Matthias</a><p class=subtitle>I am a founding partner of <a href=https://feinheit.ch>Feinheit AG</a> and <a href=https://diebruchpiloten.com>Die Bruchpiloten AG</a>. Find me on <a href=https://github.com/matthiask/>GitHub</a>, <a href=https://hachyderm.io/@matthiask rel=me>Mastodon</a>, <a href=https://bsky.app/profile/matthiask.406.ch rel=me>Bluesky</a>, <a rel="noopener noreferrer"title="if you must"href=https://www.linkedin.com/in/matthiaskestenholz target=_blank>LinkedIn</a> or by <a href=mailto:mk@406.ch>email</a>.<nav><a href=/writing/category-climate/>Climate</a><a href=/writing/category-django/>Django</a><a href=/writing/category-feincms/>feincms</a><a href=/writing/category-feincms3/>feincms3</a><a href=/writing/category-politik/>Politik</a><a href=/writing/category-programming/>Programming</a><a href=/writing/category-python/>Python</a><a href=/writing/category-til/>TIL</a><a href=/writing/category-weeknotes/>Weeknotes</a></nav></div></header><main><div class=wrappy><div class=text><small>2023-07-12 </small><h1 id=weeknotes-2023-week-28><a class=toclink href=#weeknotes-2023-week-28>Weeknotes (2023 week 28)</a></h1><h2 id=releases><a class=toclink href=#releases>Releases</a></h2><ul><li><a href=https://pypi.org/project/html-sanitizer/>html-sanitizer 2.2</a>: Made the sanitizer’s configuration initialization more strict. Strings cannot be used anymore in places where the sanitizer expects a set (resp. any iterable). It’s useful that strings are iterable in Python and I wouldn’t want to change that, but the fact that <code>("class")</code> is a string and not a tuple makes me sad. The fact that tuples are created by <code>,</code> and not by <code>()</code> will always trip up people.<li><a href=https://pypi.org/project/feincms3-language-sites/>feincms3-language-sites 0.1</a>: The version number is wrong but whatever. I’m certainly happy with the state of things. The big change in 0.1 is that <code>Page.get_absolute_url</code> no longer generates protocol-relative URLs. Depending on the value of <code>SECURE_SSL_REDIRECT</code> it automatically prepends either <code>http:</code> or <code>https:</code>.<li><a href=https://pypi.org/project/django-authlib/>django-authlib 0.15</a>: django-authlib’s admin Single Sign On module now supports a hook to automatically create staff users when a matching user doesn’t exist already. I don’t plan to use this functionality myself and I have recommended people to implement the functionality themselves using the tools in django-authlib if they need it, but the change was so small and well-contained that adding it to the core made sense to me.</ul><h2 id=pipx-inject><a class=toclink href=#pipx-inject>pipx inject</a></h2><p>We learned that <a href=https://pypa.github.io/pipx/>pipx</a> seems to remember injected packages even across <code>pipx reinstall</code> invocations. Not too surprising now that we know it, but we certainly spent some time scratching our heads. <code>pipx
uninject</code> was the thing we needed to stop pipx from installing an old version of a dependency instead of the one being specified in <code>pyproject.toml</code>.<h2 id=hatchling-and-data-files><a class=toclink href=#hatchling-and-data-files>hatchling and data files</a></h2><p>I’m very confused by the way <a href=https://hatch.pypa.io/>hatchling</a> sometimes includes data files and sometimes it doesn’t. I had to add <code>[tool.hatch.build]
include=["authlib/"]</code> to <a href=https://github.com/matthiask/django-authlib/commit/67d4673e4039eac277b5d2557c0736c1f01442ac>django-authlib’s <code>pyproject.toml</code> file</a> to make it include HTML files from subpackages. Maybe the subpackages are the reason, but I’m not sure.<h2 id=payment-providers-that-must-not-be-named><a class=toclink href=#payment-providers-that-must-not-be-named>Payment providers that must not be named</a></h2><p>I have spent hours and hours battling with the badly documented, incomplete, inconsistent and confusing API of a (not that well known) payment provider based in Switzerland. I’m surprised that this still happens years and years after Stripe started offering a really well thought out and documented API geared towards programmers. It’s really sad because when the same structure is named with differing naming conventions (e.g. <code>snake_case</code> vs. <code>camelCase</code>) in different parts of the API you just know that somebody spent too much time writing too much code instead of reusing already existing functionality.</div><div class="text prevnext"><a href=/writing/serving-zip-files-using-django/>Previous post</a><a href=/writing/weeknotes-2023-week-26/>Next post</a></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Weeknotes (2023 week 28)">Send me an email.</a> <br> <a rel="noopener noreferrer"href=https://ko-fi.com/matthiask target=_blank>☕ Buy me a coffee?</a> <br> Published on 2023-07-12 in <a href=/writing/category-django/>Django</a>, <a href=/writing/category-programming/>Programming</a>, <a href=/writing/category-weeknotes/>Weeknotes</a>, <a href=/writing/category-feincms/>feincms</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>