<!doctype html><html lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Menu improvements in django-prose-editor - Matthias Kestenholz</title><link href=/styles.6cf33c7d4923.css rel=stylesheet><link title="Blog feed" href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=title href=https://406.ch/>Hi, I'm Matthias</a><p class=subtitle>I am a founding partner of <a href=https://feinheit.ch>Feinheit AG</a> and <a href=https://diebruchpiloten.com>Die Bruchpiloten AG</a>. Find me on <a href=https://github.com/matthiask/>GitHub</a>, <a href=https://hachyderm.io/@matthiask rel=me>Mastodon</a>, <a href=https://bsky.app/profile/matthiask.406.ch rel=me>Bluesky</a>, <a rel="noopener noreferrer" title="if you must" href=https://www.linkedin.com/in/matthiaskestenholz target=_blank>LinkedIn</a> or by <a href=mailto:mk@406.ch>email</a>.<nav><a href=https://406.ch/writing/category-climate/>Climate</a><a href=https://406.ch/writing/category-django/>Django</a><a href=https://406.ch/writing/category-feincms/>feincms</a><a href=https://406.ch/writing/category-politik/>Politik</a><a href=https://406.ch/writing/category-programming/>Programming</a><a href=https://406.ch/writing/category-python/>Python</a><a href=https://406.ch/writing/category-til/>TIL</a><a href=https://406.ch/writing/category-weeknotes/>Weeknotes</a></nav></div></header><main><div class=wrappy><div class=text><small>2025-08-23 </small><h1 id=menu-improvements-in-django-prose-editor><a class=toclink href=#menu-improvements-in-django-prose-editor>Menu improvements in django-prose-editor</a></h1><p>I have repeatedly mentioned the <a href=https://pypi.org/project/django-prose-editor/>django-prose-editor</a> project in my <a href=https://406.ch/writing/category-weeknotes/>weeknotes</a> but I haven’t written a proper post about it since <a href=https://406.ch/writing/rebuilding-django-prose-editor-from-the-ground-up/>rebuilding it on top of Tiptap at the end of 2024</a>.<p>Much has happened in the meantime. A lot of work went into the menu system (as alluded to in the title of this post), but by no means does that cover all the work. As always, the <a href=https://django-prose-editor.readthedocs.io/en/latest/changelog.html>CHANGELOG</a> is the authoritative source.<p><strong>0.11</strong> introduced HTML sanitization which only allows HTML tags and attributes which can be added through the editor interface. Previously, we used <a href=https://nh3.readthedocs.io/>nh3</a> to clean up HTML and protect against XSS, but now we can be much more strict and use a restrictive allowlist.<p>We also switched to using <a href=https://406.ch/writing/django-javascript-modules-and-importmaps/>ES modules and importmaps</a> in the browser.<p>Last but not least 0.11 also introduced end-to-end testing using <a href=https://playwright.dev/>Playwright</a>.<p>The main feature in <strong>0.12</strong> was the switch to Tiptap 3.0 which fixed problems with shared extension storage when using several prose editors on the same page.<p>In <strong>0.13</strong> we switched from <a href=https://esbuild.github.io/>esbuild</a> to <a href=https://lib.rsbuild.dev/>rslib</a>. Esbuild’s configuration is nicer to look at, but rslib is built on the very powerful <a href=https://rspack.dev/>rspack</a> which I’m using everywhere.<p>In <strong>0.14</strong>, <strong>0.15</strong> and <strong>0.16</strong> the <code>Menu</code> extension was made more reusable and the way extension can register their own menu items was reworked.<p>The upcoming <strong>0.17</strong> release (alpha releases are available and I’m using them in production right now!) is a larger release again and introduces a completely reworked menu system. The menu now not only supports button groups and dialogs but also dropdowns directly in the toolbar. This allows for example showing a dropdown for block types:<p><img alt="Screenshot showing prose editor dropdowns" src=https://406.ch/assets/20250823-prose-editor-dropdowns.png><p>The styles are the same as those used in the editor interface.<p>The same interface can not only be used for HTML elements, but also for HTML classes. Tiptap has a <a href=https://tiptap.dev/docs/editor/extensions/functionality/text-style-kit>TextStyle</a> extension which allows using inline styles; I’d rather have a more restricted way of styling spans, and the prose editor <code>TextClass</code> extension does just that: It allows applying a list of predefined CSS classes to <code>&lt;span></code> elements. Of course the dropdown also shows the resulting presentation if you provide the necessary CSS to the admin interface.</div><div class="text prevnext"><a href=https://406.ch/writing/django-content-editor-cloning/>Newer post</a><a href=https://406.ch/writing/weeknotes-2025-week-27/>Older post</a></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Menu improvements in django-prose-editor">Send me an email.</a> <br> <a rel="noopener noreferrer" href=https://ko-fi.com/matthiask target=_blank>☕ Buy me a coffee?</a> <br> Published on 2025-08-23 in <a href=https://406.ch/writing/category-django/>Django</a>, <a href=https://406.ch/writing/category-programming/>Programming</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>