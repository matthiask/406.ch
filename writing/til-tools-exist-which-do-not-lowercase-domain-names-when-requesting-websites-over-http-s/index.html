<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>TIL: Tools exist which do not lowercase domain names when requesting websites over HTTP(S) - Matthias Kestenholz</title><link href=/styles.05fc032d0ad9.css rel=stylesheet><link title="Blog feed"href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=title href=/>Hi, I'm Matthias</a><p class=subtitle>I am a founding partner of <a href=https://feinheit.ch>Feinheit AG</a> and <a href=https://diebruchpiloten.com>Die Bruchpiloten AG</a>. Find me on <a href=https://github.com/matthiask/>GitHub</a>, <a href=https://hachyderm.io/@matthiask rel=me>Mastodon</a>, <a href=https://bsky.app/profile/matthiask.406.ch rel=me>Bluesky</a>, <a rel="noopener noreferrer"title="if you must"href=https://www.linkedin.com/in/matthiaskestenholz target=_blank>LinkedIn</a> or by <a href=mailto:mk@406.ch>email</a>.<nav><a href=/writing/category-climate/>Climate</a><a href=/writing/category-django/>Django</a><a href=/writing/category-feincms/>feincms</a><a href=/writing/category-feincms3/>feincms3</a><a href=/writing/category-politik/>Politik</a><a href=/writing/category-programming/>Programming</a><a href=/writing/category-python/>Python</a><a href=/writing/category-til/>TIL</a><a href=/writing/category-weeknotes/>Weeknotes</a></nav></div></header><main><div class=wrappy><div class=text><small>2025-02-13 </small><h1 id=til-tools-exist-which-do-not-lowercase-domain-names-when-requesting-websites-over-https><a class=toclink href=#til-tools-exist-which-do-not-lowercase-domain-names-when-requesting-websites-over-https>TIL: Tools exist which do not lowercase domain names when requesting websites over HTTP(S)</a></h1><p>About a week ago I received error mails for a surprising behavior (to me!) where some tool requested an URL from one of our websites using <a href=https://github.com/feincms/feincms3-language-sites/>feincms3-language-sites</a> (a Django library for multilingual websites) with a domain name containing uppercase characters.<p>I knew that the domain part of all sorts of URLs is case sensitive, but what surprised me was that our server actually got a request with such a domain name, I hadn’t really seen that before.<p>After researching a bit I learned that for example <a href=https://curl.se/>curl</a> intentionally preserves the casing of domain names, but browsers generally do lowercase domains because it’s more consistent. It’s interesting that the initial error was caused by a client with a proper Safari/macOS user agent, but further research showed that the request was probably sent by something called <code>go-social-activity-parser</code>, whatever that is.<p>I fixed the bug in <a href=https://github.com/feincms/feincms3-language-sites/>feincms3-language-sites</a> and also in <a href=https://github.com/feincms/feincms3-sites/>feincms3-sites</a> by switching to case-insensitive matching of domain names. I have not yet added punycode or IDNA equivalence to the code because I haven’t needed it yet and because I’m not 100% sure how to do it without breaking anything. Even though I often work on websites in languages with lots of accents and umlauts we don’t use such domain names too often, so it hasn’t been a problem yet. I’ll cross that bridge when I get there.</div><div class="text prevnext"><span> </span><a href=/writing/weeknotes-2025-week-05/>Next post</a></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=TIL: Tools exist which do not lowercase domain names when requesting websites over HTTP(S)">Send me an email.</a> <br> <a rel="noopener noreferrer"href=https://ko-fi.com/matthiask target=_blank>☕ Buy me a coffee?</a> <br> Published on 2025-02-13 in <a href=/writing/category-django/>Django</a>, <a href=/writing/category-programming/>Programming</a>, <a href=/writing/category-til/>TIL</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>