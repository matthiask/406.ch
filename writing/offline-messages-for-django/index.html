<!doctype html><html lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Offline messages for Django - Matthias Kestenholz</title><link href=/styles.6cf33c7d4923.css rel=stylesheet><link title="Blog feed" href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=title href=/>Hi, I'm Matthias</a><p class=subtitle>I am a founding partner of <a href=https://feinheit.ch>Feinheit AG</a> and <a href=https://diebruchpiloten.com>Die Bruchpiloten AG</a>. Find me on <a href=https://github.com/matthiask/>GitHub</a>, <a href=https://hachyderm.io/@matthiask rel=me>Mastodon</a>, <a href=https://bsky.app/profile/matthiask.406.ch rel=me>Bluesky</a>, <a rel="noopener noreferrer" title="if you must" href=https://www.linkedin.com/in/matthiaskestenholz target=_blank>LinkedIn</a> or by <a href=mailto:mk@406.ch>email</a>.<nav><a href=/writing/category-climate/>Climate</a><a href=/writing/category-django/>Django</a><a href=/writing/category-feincms/>feincms</a><a href=/writing/category-politik/>Politik</a><a href=/writing/category-programming/>Programming</a><a href=/writing/category-python/>Python</a><a href=/writing/category-til/>TIL</a><a href=/writing/category-weeknotes/>Weeknotes</a></nav></div></header><main><div class=wrappy><div class=text><small>2018-04-18 </small><h1 id=offline-messages-for-django><a class=toclink href=#offline-messages-for-django>Offline messages for Django</a></h1><p><code>django.contrib.messages</code> is awesome. Its API surface is small, it’s fast and it does what it does really well.<p>However, it sometimes happens that you would want to send messages to users outside the request-response cycle, for example from a background process or even from a <code>post_save</code> signal handler.<p>Adding a full-blown notifications-and-messages-system is of course possible. Sending a one-off message to the user would be sufficient though, but there is no way to do this with Django’s messages framework.<p>There are a few packages around solving this particular problem. Almost all of them solve this by saving undelivered messages in the database. My solution, <a href=https://django-user-messages.readthedocs.io/>django-user-messages</a> follows the same approach, but contrary to many others it does not reimplement the message storage nor replace any other functionality of <code>django.contrib.messages</code>. It only adds a few additional utilities for adding messages (e.g. <code>user_messages.api.info(...)</code> instead of <code>messages.info(...)</code>) and a context processor which concatenates Django’s messages with those provided by django-user-messages.<p>Instead of passing the request to <code>messages.info(...)</code> you would pass a user instance, or even only a user ID to <code>api.info(...)</code>.<p>Easy enough, and works well. Despite the 0.5 version number the package has been stable and essentially unchanged since July 2017 (except for the addition of Python 2 support). So I wont say to get it while it’s hot, because it’s not – instead, it is boring, stable and reliable, the way I like my <a href=https://406.ch/writing/low-maintenance-software/>low maintenance software</a>.<ul><li><a href=https://github.com/matthiask/django-user-messages/>django-user-messages on Github</a><li><a href=https://django-user-messages.readthedocs.io/>Documentation on readthedocs.io</a></ul></div><div class="text prevnext"><a href=/writing/the-final-internal_ips-fix-for-development-hosts/>Previous post</a><a href=/writing/django-sitemaps-and-alternates/>Next post</a></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Offline messages for Django">Send me an email.</a> <br> <a rel="noopener noreferrer" href=https://ko-fi.com/matthiask target=_blank>☕ Buy me a coffee?</a> <br> Published on 2018-04-18 in <a href=/writing/category-django/>Django</a>, <a href=/writing/category-programming/>Programming</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>