<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Weeknotes (2023 week 8 and 9) - Matthias Kestenholz</title><link href=/styles.7a4c5338b9f2.css rel=stylesheet><link title="Blog feed"href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=title href=/>Hi, I'm Matthias</a><p class=subtitle>I am a founding partner of <a href=https://feinheit.ch>Feinheit AG</a> and <a href=https://diebruchpiloten.com>Die Bruchpiloten AG</a>. Find me on <a href=https://github.com/matthiask/>GitHub</a>, <a href=https://hachyderm.io/@matthiask rel=me>Mastodon</a>, <a href=https://bsky.app/profile/matthiask.406.ch rel=me>Bluesky</a>, <a rel="noopener noreferrer"title="if you must"href=https://www.linkedin.com/in/matthiaskestenholz target=_blank>LinkedIn</a> or by <a href=mailto:mk@406.ch>email</a>.<nav><a href=/writing/category-climate/>Climate</a><a href=/writing/category-django/>Django</a><a href=/writing/category-feincms/>feincms</a><a href=/writing/category-feincms3/>feincms3</a><a href=/writing/category-politik/>Politik</a><a href=/writing/category-programming/>Programming</a><a href=/writing/category-python/>Python</a><a href=/writing/category-til/>TIL</a><a href=/writing/category-weeknotes/>Weeknotes</a></nav></div></header><main><div class=wrappy><div class=text><small>2023-03-03 </small><h1 id=weeknotes-2023-week-8-and-9><a class=toclink href=#weeknotes-2023-week-8-and-9>Weeknotes (2023 week 8 and 9)</a></h1><p>Last week was a short work week. We spent a few nights in the mountains. Not much snow though. Enough for some skiing and sledging.<p>This work week was â€¦ not normal. Many meetings, not enough time to work on projects. That shortens these week notes a lot.<h2 id=django-software-foundation-membership><a class=toclink href=#django-software-foundation-membership>Django Software Foundation membership</a></h2><p>I found out through Tim that I have been <a href=https://www.djangoproject.com/foundation/minutes/2023/jan/12/dsf-board-monthly-meeting/>approved as an individual member of the Django Software Foundation</a>. Iâ€™m honored and hope that this will be another way where I can give something back. It also feels good to be seen.<p>I didnâ€™t even know that the Foundationâ€™s <a href=https://www.djangoproject.com/foundation/minutes/>meeting minutes</a> were public. I still use RSS and can wholeheartedly recommend <a href=https://theoldreader.com/>The Old Reader</a> (no affiliation) and so I thought Iâ€™d try adding a RSS feed of meeting minutes to the website. <a href=https://github.com/django/djangoproject.com/pull/1316>The pull request is still being reviewed.</a> at the time of writing.<h2 id=feincms3-forms-documentation><a class=toclink href=#feincms3-forms-documentation>feincms3-forms documentation</a></h2><p>I worked on the <a href=https://github.com/matthiask/feincms3-forms>feincms3-forms</a> README a bit. The README hopefully clarifies the purpose and the components of the app a bit.<blockquote><p>This is an extremely flexible forms builder for the Django admin interface.</blockquote><h2 id=migrating-from-bitbucket-to-github><a class=toclink href=#migrating-from-bitbucket-to-github>Migrating from Bitbucket to GitHub</a></h2><p>I have been a long time Bitbucket user since GitHub used a pricing where many private repositories were very expensive and Bitbucket only charged a fee per user. This has changed long ago though. I wanted to consolidate the tools used at $work and have therefore taken the time to move all private repositores to GitHub. Determining the list of repositories in a Bitbucket Workspace was surprisingly annoying but I got there in the end with an app-specific password and curl.<p>Next, I converted the JSON into a list of Git/SSH cloning URLs:<div class=chl><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>json</span><span class=o>,</span><span class=w> </span><span class=nn>sys</span>

<span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>stdin</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
<span class=nb>print</span><span class=p>(</span>
<span class=w>    </span><span class=s2>"</span><span class=se>\n</span><span class=s2>"</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
<span class=w>        </span><span class=nb>next</span><span class=p>(</span><span class=n>link</span><span class=p>[</span><span class=s2>"href"</span><span class=p>]</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>link</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>rec</span><span class=p>[</span><span class=s2>"links"</span><span class=p>][</span><span class=s2>"clone"</span><span class=p>]</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=n>link</span><span class=p>[</span><span class=s2>"name"</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>"ssh"</span><span class=p>)</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=n>rec</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>d</span><span class=p>[</span><span class=s2>"values"</span><span class=p>]</span>
<span class=w>    </span><span class=p>)</span>
<span class=p>)</span>
</code></pre></div><p>I used it as (I had to repeat the first command for every 100 repos):<div class=chl><pre><span></span><code><span class=nv>python3</span><span class=w> </span><span class=nv>filter</span>.<span class=nv>py</span><span class=w> </span><span class=o><</span><span class=w> </span><span class=nv>repos</span>.<span class=nv>json</span><span class=w> </span><span class=o>>></span><span class=w> </span><span class=nv>clone</span>.<span class=nv>txt</span>
<span class=k>for</span><span class=w> </span><span class=nv>url</span><span class=w> </span><span class=nv>in</span><span class=w> </span>$<span class=ss>(</span><span class=nv>cat</span><span class=w> </span><span class=nv>clone</span>.<span class=nv>txt</span><span class=ss>)</span><span class=c1>; do (cd mirror; git clone --mirror $url) ; done</span>
</code></pre></div><p>Then, I wrote another Python script to create the repositores and upload them all:<div class=chl><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>sys</span>
<span class=kn>from</span><span class=w> </span><span class=nn>subprocess</span><span class=w> </span><span class=kn>import</span><span class=w> </span><span class=n>run</span>

<span class=k>for</span><span class=w> </span><span class=n>repo</span><span class=w> </span><span class=ow>in</span><span class=w> </span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
<span class=w>    </span><span class=n>run</span><span class=p>(</span><span class=sa>f</span><span class=s2>"gh repo create --private feinheit-archive/</span><span class=si>{</span><span class=n>repo</span><span class=p>[:</span><span class=o>-</span><span class=mi>4</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span><span class=w> </span><span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span><span class=w> </span><span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=w>    </span><span class=n>run</span><span class=p>(</span><span class=sa>f</span><span class=s2>"cd </span><span class=si>{</span><span class=n>repo</span><span class=si>}</span><span class=s2> && git push git@github.com:feinheit-archive/</span><span class=si>{</span><span class=n>repo</span><span class=p>[:</span><span class=o>-</span><span class=mi>4</span><span class=p>]</span><span class=si>}</span><span class=s2>.git --all"</span><span class=p>,</span><span class=w> </span><span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span><span class=w> </span><span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=w>    </span><span class=n>run</span><span class=p>(</span><span class=sa>f</span><span class=s2>"rm -rf </span><span class=si>{</span><span class=n>repo</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span><span class=w> </span><span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span><span class=w> </span><span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div><p>And ran ist as:<div class=chl><pre><span></span><code><span class=n>cd</span><span class=w> </span><span class=n>mirror</span>
<span class=n>python3</span><span class=w> </span><span class=o>../</span><span class=n>upload</span><span class=o>.</span><span class=n>py</span><span class=w> </span><span class=o>*</span>
</code></pre></div><p>Funnily enough I learned that GitHub ratelimits repository creation. So I had to wait an hour after several dozen repos and start the command again afterwards. Of course the code wasnâ€™t written defensively at first and deleted repos which werenâ€™t uploaded yet so I had to work out the set of repos I have to re-download from Bitbucketâ€¦ I think itâ€™s a bit surprising that <code>subprocess.run</code> doesnâ€™t raise an exception by default when a command fails. <code>check=True</code> should definitely be the default.<p>Iâ€™m not posting the code because Iâ€™m proud but because Iâ€™m not. Throwing such stuff together with Python feels great, and using <code>subprocess.run(..., shell=True)</code> is more fun than writing bash scripts with <code>sed</code> etc.<h2 id=use-frontend-frameworks-to-kickstart-your-site-and-to-drag-you-down-later><a class=toclink href=#use-frontend-frameworks-to-kickstart-your-site-and-to-drag-you-down-later>Use Frontend frameworks to kickstart your site and to drag you down later</a></h2><p>A longer blog post is in the making as Iâ€™m trying to formulate my thoughts on this.<p>Frontend frameworks are a great help in getting a product out of the door quickly. But tools and needs evolve. Backwards incompatible versions<sup id=fnref:semver><a class=footnote-ref href=#fn:semver>1</a></sup> of those Frameworks are published. And then it happens: Too many things break at once and you have to pick up the pieces. What has been an advantage in the beginning drags you down, because now you have to maintain not just your own code but also everything you used from $framework.<p>I wish I had been (even ðŸ˜‚) more cautious when selecting tools for potentially long running projects.<div class=footnote><hr><ol><li id=fn:semver><p>Sometimes stuff breaks even when updating patch versions.Â <a title="Jump back to footnote 1 in the text"class=footnote-backref href=#fnref:semver>â†©</a></p></ol></div></div><div class="text prevnext"><a href=/writing/weeknotes-2023-week-10/>Previous post</a><a href=/writing/weeknotes-2023-week-7/>Next post</a></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Weeknotes (2023 week 8 and 9)">Send me an email.</a> <br> <a rel="noopener noreferrer"href=https://ko-fi.com/matthiask target=_blank>â˜• Buy me a coffee?</a> <br> Published on 2023-03-03 in <a href=/writing/category-django/>Django</a>, <a href=/writing/category-programming/>Programming</a>, <a href=/writing/category-weeknotes/>Weeknotes</a>, <a href=/writing/category-feincms/>feincms</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>