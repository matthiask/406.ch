<!doctypehtml><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Weeknotes (2023 week 8 and 9) - Matthias Kestenholz</title><link href=/styles.b8b7ef2015d8092526f2f18dad22a94a.css rel=stylesheet><link title="Blog feed"href=/writing/feed/ rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=back href=/>Back to the overview</a></div></header><main><div class=wrappy><div class=text><h1>Weeknotes (2023 week 8 and 9)</h1><p>Last week was a short work week. We spent a few nights in the mountains. Not much snow though. Enough for some skiing and sledging.<p>This work week was â€¦ not normal. Many meetings, not enough time to work on projects. That shortens these week notes a lot.<h2>Django Software Foundation membership</h2><p>I found out through Tim that I have been <a href=https://www.djangoproject.com/foundation/minutes/2023/jan/12/dsf-board-monthly-meeting/>approved as an individual member of the Django Software Foundation</a>. Iâ€™m honored and hope that this will be another way where I can give something back. It also feels good to be seen.<p>I didnâ€™t even know that the Foundationâ€™s <a href=https://www.djangoproject.com/foundation/minutes/>meeting minutes</a> were public. I still use RSS and can wholeheartedly recommend <a href=https://theoldreader.com/>The Old Reader</a> (no affiliation) and so I thought Iâ€™d try adding a RSS feed of meeting minutes to the website. <a href=https://github.com/django/djangoproject.com/pull/1316>The pull request is still being reviewed.</a> at the time of writing.<h2>feincms3-forms documentation</h2><p>I worked on the <a href=https://github.com/matthiask/feincms3-forms>feincms3-forms</a> README a bit. The README hopefully clarifies the purpose and the components of the app a bit.<blockquote><p>This is an extremely flexible forms builder for the Django admin interface.</blockquote><h2>Migrating from Bitbucket to GitHub</h2><p>I have been a long time Bitbucket user since GitHub used a pricing where many private repositories were very expensive and Bitbucket only charged a fee per user. This has changed long ago though. I wanted to consolidate the tools used at $work and have therefore taken the time to move all private repositores to GitHub. Determining the list of repositories in a Bitbucket Workspace was surprisingly annoying but I got there in the end with an app-specific password and curl.<p>Next, I converted the JSON into a list of Git/SSH cloning URLs:<pre><code>import json, sys

d = json.loads(sys.stdin.read())
print(
    "\n".join(
        next(link["href"] for link in rec["links"]["clone"] if link["name"] == "ssh")
        for rec in d["values"]
    )
)
</code></pre><p>I used it as (I had to repeat the first command for every 100 repos):<pre><code>python3 filter.py < repos.json >> clone.txt
for url in $(cat clone.txt); do (cd mirror; git clone --mirror $url) ; done
</code></pre><p>Then, I wrote another Python script to create the repositores and upload them all:<pre><code>import sys
from subprocess import run

for repo in sys.argv[1:]:
    run(f"gh repo create --private feinheit-archive/{repo[:-4]}", shell=True, check=True)
    run(f"cd {repo} && git push git@github.com:feinheit-archive/{repo[:-4]}.git --all", shell=True, check=True)
    run(f"rm -rf {repo}", shell=True, check=True)
</code></pre><p>And ran ist as:<pre><code>cd mirror
python3 ../upload.py *
</code></pre><p>Funnily enough I learned that GitHub ratelimits repository creation. So I had to wait an hour after several dozen repos and start the command again afterwards. Of course the code wasnâ€™t written defensively at first and deleted repos which werenâ€™t uploaded yet so I had to work out the set of repos I have to re-download from Bitbucketâ€¦ I think itâ€™s a bit surprising that <code>subprocess.run</code> doesnâ€™t raise an exception by default when a command fails. <code>check=True</code> should definitely be the default.<p>Iâ€™m not posting the code because Iâ€™m proud but because Iâ€™m not. Throwing such stuff together with Python feels great, and using <code>subprocess.run(..., shell=True)</code> is more fun than writing bash scripts with <code>sed</code> etc.<h2>Use Frontend frameworks to kickstart your site and to drag you down later</h2><p>A longer blog post is in the making as Iâ€™m trying to formulate my thoughts on this.<p>Frontend frameworks are a great help in getting a product out of the door quickly. But tools and needs evolve. Backwards incompatible versions<sup id=fnref:semver><a class=footnote-ref href=#fn:semver>1</a></sup> of those Frameworks are published. And then it happens: Too many things break at once and you have to pick up the pieces. What has been an advantage in the beginning drags you down, because now you have to maintain not just your own code but also everything you used from $framework.<p>I wish I had been (even ðŸ˜‚) more cautious when selecting tools for potentially long running projects.<div class=footnote><hr><ol><li id=fn:semver><p>Sometimes stuff breaks even when updating patch versions.Â <a title="Jump back to footnote 1 in the text"class=footnote-backref href=#fnref:semver>â†©</a></p></ol></div></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Weeknotes (2023 week 8 and 9)">Send me an email.</a> <br> <a rel="noopener noreferrer"href=https://ko-fi.com/matthiask target=_blank>â˜• Buy me a coffee?</a> <br> Published on 2023-03-03 in <a href=/writing/category-django//>Django</a>, <a href=/writing/category-programming//>Programming</a>, <a href=/writing/category-weeknotes//>Weeknotes</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-dark></script></div></footer>