<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><title>Customize the Django admin to differentiate environments - Matthias Kestenholz</title><link href=/styles.f534a940f4b9.css rel=stylesheet><link title="Blog feed"href=/writing/atom.xml rel=alternate type=application/atom+xml><body><header><div class=wrappy><a class=back href=/>Back to the overview</a></div></header><main><div class=wrappy><div class=text><small>2023-10-19 </small><h1>Customize the Django admin to differentiate environments</h1><p><img alt="Four different themes"src=https://user-images.githubusercontent.com/2627/276531977-6787c55e-4e8c-448c-8ed4-c71cd98c9750.png><p>We often have the same website running in different configurations:<ul><li>Once as a production site.<li>Once as a place where editors update and preview the content. The content is later automatically (and maybe <a href=https://406.ch/writing/moving-data-including-deletions-between-the-same-django-app-running-in-different-environments/>partially</a>) transferred from this environment to the production environment.<li>Once as a stage environment to stabilize the code.<li>And maybe additional environments for local development.</ul><p>The Django admin panel mainly uses CSS variables for styling since <a href=https://docs.djangoproject.com/en/4.2/ref/contrib/admin/#admin-theming>theming support was introduced in Django 3.2</a> (by yours truly with a lot of help from others). This makes it simple and fun to customize the colors of all interface elements in a straightforward way without having to write loads of CSS.<p>If you have a <code>ENVIRONMENT</code> context variable available (as we do) you could add the following template as <code>admin/base.html</code> to your project, giving you a red color scheme for the production environment (to discourage people from updating content) and a nice scheme for the <code>preproduction</code> environment which clearly deviates from the standard color scheme used everywhere else:<div class=chl><pre><span></span><code><span class=cp>{%</span> <span class=k>block</span> <span class=nv>extrahead</span> <span class=cp>%}</span>
  <span class=cp>{{</span> <span class=nb>block</span><span class=nv>.super</span> <span class=cp>}}</span>
  <span class=p><</span><span class=nt>style</span><span class=p>></span>
<span class=p>#</span><span class=nn>site-name</span><span class=p>::</span><span class=nd>after</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=k>content</span><span class=p>:</span><span class=w> </span><span class=s2>" (</span><span class=cp>{{</span> <span class=nv>ENVIRONMENT</span> <span class=cp>}}</span><span class=s2>)"</span><span class=p>;</span>
<span class=w>  </span><span class=k>font-size</span><span class=p>:</span><span class=w> </span><span class=mi>60</span><span class=kt>%</span><span class=p>;</span>
<span class=p>}</span>
<span class=w>  </span><span class=p>&LT/</span><span class=nt>style</span><span class=p>></span>
  <span class=cp>{%</span> <span class=k>if</span> <span class=nv>ENVIRONMENT</span> <span class=o>==</span> <span class=s1>'production'</span> <span class=cp>%}</span>
    <span class=p><</span><span class=nt>style</span><span class=p>></span>
<span class=p>:</span><span class=nd>root</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nv>--primary</span><span class=p>:</span><span class=w> </span><span class=mh>#aa0000</span><span class=p>;</span>
<span class=w>  </span><span class=nv>--secondary</span><span class=p>:</span><span class=w> </span><span class=mh>#810000</span><span class=p>;</span>
<span class=w>  </span><span class=nv>--accent</span><span class=p>:</span><span class=w> </span><span class=kc>yellow</span><span class=p>;</span>
<span class=p>}</span>
<span class=w>    </span><span class=p>&LT/</span><span class=nt>style</span><span class=p>></span>
  <span class=cp>{%</span> <span class=k>elif</span> <span class=nv>ENVIRONMENT</span> <span class=o>==</span> <span class=s1>'preproduction'</span> <span class=cp>%}</span>
    <span class=p><</span><span class=nt>style</span><span class=p>></span>
<span class=p>:</span><span class=nd>root</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nv>--primary</span><span class=p>:</span><span class=w> </span><span class=mh>#30b181</span><span class=p>;</span>
<span class=w>  </span><span class=nv>--secondary</span><span class=p>:</span><span class=w> </span><span class=mh>#1f7957</span><span class=p>;</span>
<span class=w>  </span><span class=nv>--accent</span><span class=p>:</span><span class=w> </span><span class=mh>#cdffea</span><span class=p>;</span>
<span class=p>}</span>
<span class=w>    </span><span class=p>&LT/</span><span class=nt>style</span><span class=p>></span>
  <span class=cp>{%</span> <span class=k>endif</span> <span class=cp>%}</span>
<span class=cp>{%</span> <span class=k>endblock</span> <span class=cp>%}</span>
</code></pre></div></div></div></main><footer><div class=wrappy><p><small> I like feedback! <a href="mailto:mk@406.ch?subject=Customize the Django admin to differentiate environments">Send me an email.</a> <br> <a rel="noopener noreferrer"href=https://ko-fi.com/matthiask target=_blank>â˜• Buy me a coffee?</a> <br> Published on 2023-10-19 in <a href=/writing/category-django/>Django</a>, <a href=/writing/category-programming/>Programming</a> </small></p><script async crossorigin issue-term=pathname repo=matthiask/406-comments src=https://utteranc.es/client.js theme=github-light></script></div></footer>